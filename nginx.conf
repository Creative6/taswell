user  root;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;



events {
    worker_connections  1024;
}


http {
    client_max_body_size 100M;
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;


    # server {
    #     listen 80;
    #     server_name taswell.cn;

    #     location /{
    #         root   404;
    #         index  404.html;
    #     }
        
    # }
    server {
        listen       80;
        server_name  blog.taswell.cn; #域名
        # index myindex.html;  #指定的server的root的访问页�?
        # root /home/www/index; #指定的server的root目录
        # rewrite ^(.*)$ https://${server_name}$1 permanent;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        #我工程的context-path=mytest
        location / {
                proxy_pass http://blog.taswell.cn:8088;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-Port $server_port;
        #    root   html;
        #    index  index.html index.htm;
        }

        # location ~* .(jpg|gif|png|js|css)$ {
        #     root C:\Users\Administrator\Desktop\weshow_static\static;
        #     if (-f $request_filename) {
        #         expires max;
        #         break;
        #     }
        # }
        
        # location ~ .*\.(gif|jpg|jpeg|png)$ {  
        #     root C:/Users/Administrator/Desktop/weshow_static/images/;#指定图片存放路径 
        #     # image_filter   resize  100 100; 
        #     if ( !-e $request_filename)  
        #     {  
        #         expires max;
        #         break;
        #     }  
        # }  
        location /images/{  
            root /home/wu/weshow_static;#指定图片存放路径 
            # image_filter   resize  100 100; 
            if ( !-e $request_filename)  
            {  
                expires max;
                break;
            }  
        } 

        location /compress_imgs/{  
            root /home/wu/weshow_static;#指定图片存放路径 
            # image_filter   resize  100 100; 
            if ( !-e $request_filename)  
            {  
                expires max;
                break;
            }  
        }
          
	    location /avatar_imgs/{
            root /home/wu/weshow_static;#指定图片存放路径
            # image_filter   resize  100 100;
            if ( !-e $request_filename)
            {
                expires max;
                break;
            }
        }

        location ~* ^.*/(xhjt|xhjg)/(\d+)\.(gif|jpg|png)$ {
            root /home/wu/emoticons/;
        }

    }
    
    #视频、音频文件
    server {
        listen       80;
        server_name  static.taswell.cn;
        location /{
            root /home/wu/;
            index index.html;
        }

        location /audio/ {
            root /home/wu;
            index 1.mp4;
        }

        location /video/{
            root /home/wu;
            index /video/1.mp4;
        }
        error_page  404              /404.html;
    }
    

    # server {
    #     listen       443;
    #     server_name   c-co.co;
    #     ssl on;
    #     #配置证书的路�?
    #     ssl_certificate      C:/Users/Administrator/Desktop/nginx-1.14.0/cert/1191204_www.c-co.co.pem;
    #     ssl_certificate_key  C:/Users/Administrator/Desktop/nginx-1.14.0/cert/1191204_www.c-co.co.key;
    #     #ssl_session_cache    shared:SSL:1m;
    #     ssl_session_timeout  5m;
    #     ssl_ciphers  ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
    #     ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    #     ssl_prefer_server_ciphers  on;
    #     location / {
    #          #配置转发�?088端口
    #         proxy_pass http://c-co.co:8088;
    #         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #         proxy_set_header X-Forwarded-Proto $scheme;
    #         proxy_set_header X-Forwarded-Port $server_port;
    #     }
    #     location /images/{  
    #         proxy_pass http://c-co.co:8088;
    #         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #         proxy_set_header X-Forwarded-Proto $scheme;
    #         proxy_set_header X-Forwarded-Port $server_port;
    #     } 

    #     # location /compress_imgs/{  
    #     #     proxy_pass http://c-co.co:8088;
    #     #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     #     proxy_set_header X-Forwarded-Proto $scheme;
    #     #     proxy_set_header X-Forwarded-Port $server_port;
    #     # }
    # }

    # flower html
    server {
        listen       80;
        server_name taswell.cn www.taswell.cn;
        if ($host ~* www.taswell.cn) {
            rewrite ^/(.*)$ http://taswell.cn/$1 permanent;
        }
        charset utf-8;
        location / {
            root   html/taswell;
            index  index.html index.htm;
            try_files $uri $uri/ @rewrites;  
#            index fix.html;
            # proxy_pass http://127.0.0.1:8081;
        }

        location @rewrites {
            rewrite ^(.+)$ /index.html last;
        }

        error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }


#   server {
#       listen       80;
#       server_name  taswell.cn;
#       charset utf-8;
#       location / {
#           root   html/taswell;
#           index  index.html index.htm;
#           try_files $uri $uri/ @rewrites;
#            index fix.html;
#           # proxy_pass http://127.0.0.1:8081;
#       }

#       location @rewrites {
#           rewrite ^(.+)$ /index.html last;
#       }

#       error_page  404              /404.html;

#       # redirect server error pages to the static page /50x.html
#       #
#       error_page   500 502 503 504  /50x.html;
#       location = /50x.html {
#           root   html;
#       }
#   }


    # flower image
    server {
        listen       80;
        server_name  static.creative6.cn;

        location / {
            root   html;
            index  img/tusiji/1.gif;
        }
		
		error_page  404              /img/tusiji/3.gif;
    }
	
	# flower api
	server {
        listen       80;
        server_name  api.taswell.cn;
		
        location / {
			proxy_pass http://127.0.0.1:5679;
        }

        error_page  404              /404.html;
    }

    server {
        listen       80;
        server_name  wyz.creative6.cn;
		
        location / {
            root   html/wyz;
            index  index.html index.htm;
        }

        error_page  404              /404.html;
    }

    server {
        listen       80;
        server_name  download.creative6.cn;
		
        location / {
            root   html/software;
            index  index.html index.htm;
        }

        error_page  404              /404.html;
    }
    include /root/nainiu/nginx/*.conf;

}

